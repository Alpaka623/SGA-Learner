<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lerne das Standard Galactic Alphabet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c0a1e;
            color: #e0e0e0;
        }
        .card {
            background-color: rgba(30, 27, 58, 0.7);
            border: 1px solid #a855f7;
            backdrop-filter: blur(10px);
        }
        .btn-primary {
            background-color: #8b5cf6;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.5);
        }
        .btn-primary:hover {
            background-color: #a855f7;
            transform: translateY(-2px);
            box-shadow: 0 0 25px rgba(168, 85, 247, 0.8);
        }
        .btn-option {
            background-color: #282347;
            border: 1px solid #4c1d95;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 70px;
        }
        .btn-option:hover {
            background-color: #4c1d95;
            border-color: #a855f7;
        }
        .btn-option.correct {
            background-color: #22c55e !important;
            border-color: #16a34a !important;
            color: white;
        }
        .btn-option.incorrect {
            background-color: #ef4444 !important;
            border-color: #dc2626 !important;
            color: white;
        }
        .progress-bar-bg {
            background-color: #282347;
        }
        .progress-bar-fill {
            background: linear-gradient(90deg, #8b5cf6, #d946ef);
            transition: width 0.5s ease-in-out;
        }
        .keyboard-key {
            cursor: pointer;
            user-select: none;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .keyboard-key:active {
            transform: scale(0.95);
        }
        .input-box {
            min-height: 80px;
            background-color: rgba(12, 10, 30, 0.8);
            border: 1px dashed #4c1d95;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .glowing-text {
            text-shadow: 0 0 8px #d946ef, 0 0 12px #d946ef;
        }
        .question-display-container {
            min-height: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 bg-cover bg-center" style="background-image: url('https://placehold.co/1920x1080/0c0a1e/0c0a1e?text=');">
<div id="app" class="w-full max-w-4xl mx-auto">
    <!-- Start Screen -->
    <div id="start-screen" class="text-center">
        <h1 class="text-5xl font-bold mb-4 glowing-text" style="font-family: 'Orbitron', sans-serif;">Galactic Alphabet Trainer</h1>
        <p class="text-xl mb-8 text-purple-300">Werde ein Meister der intergalaktischen Kommunikation.</p>
        <button id="start-button" class="btn-primary text-white font-bold py-3 px-8 rounded-lg text-2xl">Mission starten</button>
    </div>

    <!-- Main Game Screen -->
    <div id="game-screen" class="hidden">
        <div class="card rounded-xl p-6 md:p-8 shadow-2xl">
            <!-- Header -->
            <div class="flex justify-between items-center mb-6">
                <h2 id="level-title" class="text-2xl font-bold text-purple-300">Level 1: Buchstaben</h2>
                <div class="text-lg font-bold">Score: <span id="score">0</span></div>
            </div>

            <!-- Progress Bar -->
            <div class="w-full progress-bar-bg rounded-full h-4 mb-6">
                <div id="progress-bar" class="progress-bar-fill h-4 rounded-full" style="width: 0%"></div>
            </div>

            <!-- Question Area -->
            <div class="text-center mb-6">
                <p id="instruction" class="text-lg mb-4">Welcher Buchstabe ist das?</p>
                <div id="question-display" class="question-display-container my-4"></div>
            </div>

            <!-- Answer Options / Input Area -->
            <div id="answer-area">
                <!-- Options for Level 1 -->
                <div id="options-container" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
                <!-- Input for Level 2 & 3 -->
                <div id="word-input-area" class="hidden">
                    <div id="input-box" class="input-box rounded-lg p-4 mb-4"></div>
                    <div id="galactic-keyboard" class="grid grid-cols-7 md:grid-cols-9 gap-2 text-center"></div>
                    <div class="flex justify-center mt-4 gap-4">
                        <button id="clear-button" class="btn-option text-white font-bold py-2 px-6 rounded-lg">Löschen</button>
                        <button id="backspace-button" class="btn-option text-white font-bold py-2 px-6 rounded-lg">Zurück</button>
                    </div>
                </div>
            </div>

            <!-- Feedback Message -->
            <div id="feedback-message" class="text-center text-2xl font-bold mt-6 h-8"></div>

            <!-- Next Button -->
            <div class="text-center mt-6">
                <button id="next-button" class="btn-primary text-white font-bold py-3 px-8 rounded-lg text-xl hidden">Weiter</button>
            </div>
        </div>
    </div>

    <!-- Level Complete Screen -->
    <div id="level-complete-screen" class="hidden text-center">
        <div class="card rounded-xl p-8 shadow-2xl">
            <h1 id="level-complete-title" class="text-4xl font-bold mb-4 glowing-text" style="font-family: 'Orbitron', sans-serif;">Level Abgeschlossen!</h1>
            <p class="text-xl mb-6 text-purple-300">Du hast die Grundlagen gemeistert. Bereit für die nächste Herausforderung?</p>
            <button id="next-level-button" class="btn-primary text-white font-bold py-3 px-8 rounded-lg text-2xl">Nächstes Level</button>
        </div>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // DEINE EXAKTEN PIXEL-KOORDINATEN
        const GALACTIC_PIXEL_DATA = {
            'A': [[0,0,1,1,0], [0,1,0,0,1], [0,1,0,0,0], [0,1,0,0,0], [1,1,0,0,0]],
            'B': [[0,0,1,0,0], [0,0,1,0,0], [0,0,0,1,0], [0,0,0,0,1], [1,1,1,1,1]],
            'C': [[0,0,1,0,0], [0,0,0,0,0], [0,0,1,0,0], [0,0,0,1,0], [0,0,0,1,0]],
            'D': [[1,1,1,1,1], [0,0,0,0,0], [1,1,0,0,0], [0,0,1,1,1], [0,0,0,0,0]],
            'E': [[1,0,0,0,1], [1,0,0,0,0], [1,0,0,0,0], [1,0,0,0,0], [1,1,1,1,1]],
            'F': [[1,1,1,1,1], [0,0,0,0,0], [1,0,1,0,1], [0,0,0,0,0], [0,0,0,0,0]],
            'G': [[0,0,0,1,0], [0,0,0,1,0], [0,0,1,1,0], [0,0,0,1,0], [0,0,0,1,0]],
            'H': [[1,1,1,1,1], [0,0,0,0,0], [1,1,1,1,1], [0,0,1,0,0], [0,0,1,0,0]],
            'I': [[0,0,1,0,0], [0,0,1,0,0], [0,0,0,0,0], [0,0,1,0,0], [0,0,1,0,0]],
            'J': [[0,0,1,0,0], [0,0,0,0,0], [0,0,1,0,0], [0,0,0,0,0], [0,0,1,0,0]],
            'K': [[0,0,1,0,0], [0,0,1,0,0], [1,0,1,0,1], [0,0,1,0,0], [0,0,1,0,0]],
            'L': [[0,0,1,0,0], [0,0,1,0,1], [0,0,1,0,0], [0,0,1,0,1], [0,0,1,0,0]],
            'M': [[1,0,0,0,1], [0,0,0,0,1], [0,0,0,0,1], [0,0,0,0,1], [1,1,1,1,1]],
            'N': [[1,0,0,0,1], [1,0,0,0,1], [0,0,0,1,1], [0,0,1,1,0], [1,1,1,0,0]],
            'O': [[1,1,1,1,1], [0,0,0,0,1], [0,0,0,1,1], [0,0,1,1,0], [1,1,1,0,0]],
            'P': [[0,1,0,1,0], [0,0,0,1,0], [0,1,0,1,0], [0,1,0,0,0], [0,1,0,1,0]],
            'Q': [[0,0,1,0,0], [0,0,0,0,0], [1,1,1,1,1], [0,0,0,0,1], [1,1,1,1,1]],
            'R': [[1,0,0,0,1], [0,0,0,0,0], [0,0,0,0,0], [0,0,0,0,0], [1,0,0,0,1]],
            'S': [[0,0,1,0,0], [0,0,1,0,0], [0,0,0,1,0], [0,0,0,1,0], [0,0,0,1,0]],
            'T': [[1,1,1,1,1], [0,0,0,0,1], [0,0,0,0,1], [0,0,0,0,0], [0,0,0,0,1]],
            'U': [[0,0,0,0,0], [0,1,0,1,0], [0,0,0,0,0], [0,1,1,1,0], [0,0,0,0,0]],
            'V': [[0,0,1,0,0], [0,0,1,0,0], [1,1,1,1,1], [0,0,0,0,0], [1,1,1,1,1]],
            'W': [[0,0,0,0,0], [0,0,1,0,0], [0,0,0,0,0], [0,1,0,1,0], [0,0,0,0,0]],
            'X': [[1,0,0,0,1], [0,0,0,1,0], [0,0,0,1,0], [0,0,1,0,0], [0,0,1,0,0]],
            'Y': [[0,1,0,1,0], [0,1,0,1,0], [0,1,0,1,0], [0,1,0,1,0], [0,1,0,1,0]],
            'Z': [[0,0,1,0,0], [0,1,0,1,0], [0,1,0,1,0], [0,1,0,1,0], [0,1,0,1,0]]
        };
        const LATIN_ALPHABET = Object.keys(GALACTIC_PIXEL_DATA);

        const WORDS = ["HELLO", "WORLD", "SPACE", "GALAXY", "ALIEN", "STAR", "MOON", "SUN", "ORBIT", "VOID"];
        const SENTENCES = ["WE COME IN PEACE", "TAKE ME TO YOUR LEADER", "THE TRUTH IS OUT THERE", "A GALAXY FAR FAR AWAY"];

        const LEVELS = [
            { id: 1, title: 'Level 1: Buchstaben', questions: LATIN_ALPHABET, type: 'letters' },
            { id: 2, title: 'Level 2: Wörter', questions: WORDS, type: 'words' },
            { id: 3, title: 'Level 3: Sätze', questions: SENTENCES, type: 'sentences' }
        ];
        const QUESTIONS_PER_LEVEL = 10;

        let currentLevelIndex = 0;
        let currentQuestionIndex = 0;
        let score = 0;
        let questionsForCurrentLevel = [];
        let currentCorrectAnswer = '';
        let userInput = '';

        // --- Element-Referenzen ---
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const levelCompleteScreen = document.getElementById('level-complete-screen');
        const startButton = document.getElementById('start-button');
        const levelTitle = document.getElementById('level-title');
        const scoreDisplay = document.getElementById('score');
        const progressBar = document.getElementById('progress-bar');
        const instruction = document.getElementById('instruction');
        const questionDisplay = document.getElementById('question-display');
        const optionsContainer = document.getElementById('options-container');
        const wordInputArea = document.getElementById('word-input-area');
        const inputBox = document.getElementById('input-box');
        const galacticKeyboard = document.getElementById('galactic-keyboard');
        const clearButton = document.getElementById('clear-button');
        const backspaceButton = document.getElementById('backspace-button');
        const feedbackMessage = document.getElementById('feedback-message');
        const nextButton = document.getElementById('next-button');
        const levelCompleteTitle = document.getElementById('level-complete-title');
        const nextLevelButton = document.getElementById('next-level-button');

        // --- Event Listeners ---
        startButton.addEventListener('click', startGame);
        nextButton.addEventListener('click', nextQuestion);
        nextLevelButton.addEventListener('click', startNextLevel);
        clearButton.addEventListener('click', clearInput);
        backspaceButton.addEventListener('click', backspaceInput);

        // --- Hauptfunktionen ---
        function startGame() {
            startScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            levelCompleteScreen.classList.add('hidden');
            currentLevelIndex = 0;
            score = 0;
            setupLevel();
        }

        function startNextLevel() {
            currentLevelIndex++;
            if (currentLevelIndex >= LEVELS.length) {
                startScreen.classList.remove('hidden');
                gameScreen.classList.add('hidden');
                levelCompleteScreen.classList.add('hidden');
                startScreen.querySelector('h1').textContent = "Mission erfüllt!";
                startScreen.querySelector('p').textContent = `Fantastisch! Dein finaler Score ist ${score}.`;
                startButton.textContent = "Nochmal spielen";
                return;
            }
            levelCompleteScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            setupLevel();
        }

        function setupLevel() {
            currentQuestionIndex = 0;
            const level = LEVELS[currentLevelIndex];
            levelTitle.textContent = level.title;
            updateScore();
            questionsForCurrentLevel = shuffleArray([...level.questions]).slice(0, QUESTIONS_PER_LEVEL);

            if (level.type === 'letters') {
                optionsContainer.classList.remove('hidden');
                wordInputArea.classList.add('hidden');
            } else { // Words and Sentences
                instruction.textContent = level.type === 'words' ? "Schreibe das Wort:" : "Übersetze den Satz:";
                optionsContainer.classList.add('hidden');
                wordInputArea.classList.remove('hidden');
                buildKeyboard();
            }
            loadQuestion();
        }

        function loadQuestion() {
            userInput = '';
            updateInputBox();
            feedbackMessage.textContent = '';
            nextButton.classList.add('hidden');
            updateProgressBar();

            if (currentQuestionIndex >= questionsForCurrentLevel.length) {
                showLevelCompleteScreen();
                return;
            }

            const level = LEVELS[currentLevelIndex];
            currentCorrectAnswer = questionsForCurrentLevel[currentQuestionIndex];
            questionDisplay.innerHTML = '';

            if (level.type === 'letters') {
                const isReverseQuestion = Math.random() < 0.4; // 40% Chance für umgekehrte Frage
                if (isReverseQuestion) {
                    instruction.textContent = "Welches galaktische Zeichen ist das?";
                    const questionTextEl = document.createElement('div');
                    questionTextEl.textContent = currentCorrectAnswer;
                    questionTextEl.className = 'text-8xl font-bold';
                    questionDisplay.appendChild(questionTextEl);
                    generateGalacticOptions(currentCorrectAnswer);
                } else {
                    instruction.textContent = "Welcher Buchstabe ist das?";
                    questionDisplay.appendChild(createPixelCharacter(currentCorrectAnswer, 12));
                    generateLatinOptions(currentCorrectAnswer);
                }
            } else { // Words and Sentences
                const questionTextEl = document.createElement('div');
                questionTextEl.textContent = currentCorrectAnswer;
                questionTextEl.className = 'text-3xl font-bold tracking-widest';
                questionDisplay.appendChild(questionTextEl);
                checkWordAnswer(); // Enable checking
            }
        }

        function generateLatinOptions(correctLetter) {
            optionsContainer.innerHTML = '';
            let options = [correctLetter];
            while (options.length < 4) {
                const randomLetter = LATIN_ALPHABET[Math.floor(Math.random() * LATIN_ALPHABET.length)];
                if (!options.includes(randomLetter)) {
                    options.push(randomLetter);
                }
            }
            options = shuffleArray(options);
            options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('btn-option', 'text-white', 'font-bold', 'py-4', 'px-5', 'rounded-lg', 'text-2xl');
                button.addEventListener('click', () => checkLetterAnswer(option, button));
                optionsContainer.appendChild(button);
            });
        }

        function generateGalacticOptions(correctLetter) {
            optionsContainer.innerHTML = '';
            let options = [correctLetter];
            while (options.length < 4) {
                const randomLetter = LATIN_ALPHABET[Math.floor(Math.random() * LATIN_ALPHABET.length)];
                if (!options.includes(randomLetter)) {
                    options.push(randomLetter);
                }
            }
            options = shuffleArray(options);
            options.forEach(option => {
                const button = document.createElement('button');
                button.dataset.letter = option;
                button.classList.add('btn-option', 'p-4', 'rounded-lg');
                button.appendChild(createPixelCharacter(option, 6));
                button.addEventListener('click', () => checkLetterAnswer(option, button));
                optionsContainer.appendChild(button);
            });
        }

        function checkLetterAnswer(selectedOption, button) {
            const buttons = optionsContainer.querySelectorAll('button');
            buttons.forEach(btn => btn.disabled = true);

            if (selectedOption === currentCorrectAnswer) {
                feedbackMessage.textContent = 'Korrekt!';
                feedbackMessage.style.color = '#22c55e';
                button.classList.add('correct');
                score += 10;
                updateScore();
            } else {
                feedbackMessage.textContent = `Falsch! Richtig wäre: ${currentCorrectAnswer}`;
                feedbackMessage.style.color = '#ef4444';
                button.classList.add('incorrect');
                buttons.forEach(btn => {
                    if (btn.textContent === currentCorrectAnswer || btn.dataset.letter === currentCorrectAnswer) {
                        btn.classList.add('correct');
                    }
                });
            }
            nextButton.classList.remove('hidden');
        }

        function buildKeyboard() {
            galacticKeyboard.innerHTML = '';
            const keys = shuffleArray([...LATIN_ALPHABET]);
            keys.forEach(key => {
                const keyElement = document.createElement('div');
                keyElement.classList.add('keyboard-key', 'btn-option', 'p-2', 'rounded-md');
                keyElement.dataset.key = key;
                keyElement.appendChild(createPixelCharacter(key, 3));
                keyElement.addEventListener('click', () => handleKeyPress(key));
                galacticKeyboard.appendChild(keyElement);
            });
            // Add Spacebar
            const spacebar = document.createElement('div');
            spacebar.textContent = 'SPACE';
            spacebar.classList.add('keyboard-key', 'btn-option', 'p-2', 'rounded-md', 'col-span-3', 'md:col-span-2');
            spacebar.addEventListener('click', () => handleKeyPress(' '));
            galacticKeyboard.appendChild(spacebar);
        }

        function handleKeyPress(key) {
            userInput += key;
            updateInputBox();
            checkWordAnswer();
        }

        function updateInputBox() {
            inputBox.innerHTML = '';
            for(const char of userInput) {
                if (char === ' ') {
                    const space = document.createElement('div');
                    space.style.width = '20px'; // Visual space
                    inputBox.appendChild(space);
                } else {
                    inputBox.appendChild(createPixelCharacter(char, 5));
                }
            }
        }

        function clearInput() {
            userInput = '';
            updateInputBox();
            checkWordAnswer();
        }

        function backspaceInput() {
            userInput = userInput.slice(0, -1);
            updateInputBox();
            checkWordAnswer();
        }

        function checkWordAnswer() {
            if (userInput === currentCorrectAnswer) {
                feedbackMessage.textContent = 'Perfekt!';
                feedbackMessage.style.color = '#22c55e';
                score += 20;
                updateScore();
                nextButton.classList.remove('hidden');
                galacticKeyboard.querySelectorAll('.keyboard-key').forEach(k => k.style.pointerEvents = 'none');
            } else {
                feedbackMessage.textContent = '';
                nextButton.classList.add('hidden');
                galacticKeyboard.querySelectorAll('.keyboard-key').forEach(k => k.style.pointerEvents = 'auto');
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }

        // --- Hilfsfunktionen ---
        function createPixelCharacter(latinChar, pixelSize = 4) {
            const matrix = GALACTIC_PIXEL_DATA[latinChar];
            if (!matrix) return document.createElement('span');

            const container = document.createElement('div');
            let maxWidth = 0;
            matrix.forEach(row => {
                if(row.length > maxWidth) maxWidth = row.length;
            });

            container.style.display = 'inline-grid';
            container.style.gridTemplateColumns = `repeat(${maxWidth}, 1fr)`;
            container.style.gap = `0px`;
            container.style.alignSelf = 'center';

            for (let r = 0; r < matrix.length; r++) {
                for (let c = 0; c < maxWidth; c++) {
                    const pixel = document.createElement('div');
                    pixel.style.width = `${pixelSize}px`;
                    pixel.style.height = `${pixelSize * 1.25}px`;
                    if (matrix[r][c] === 1) {
                        // HIER IST DIE ÄNDERUNG: komplett weiß und ohne Schatten
                        pixel.style.backgroundColor = '#FFFFFF';
                    }
                    container.appendChild(pixel);
                }
            }
            return container;
        }

        function updateScore() {
            scoreDisplay.textContent = score;
        }

        function updateProgressBar() {
            const progress = (currentQuestionIndex / questionsForCurrentLevel.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        function showLevelCompleteScreen() {
            updateProgressBar();
            setTimeout(() => {
                gameScreen.classList.add('hidden');
                levelCompleteScreen.classList.remove('hidden');
                const level = LEVELS[currentLevelIndex];
                levelCompleteTitle.textContent = `${level.title} Abgeschlossen!`;
                if (currentLevelIndex >= LEVELS.length - 1) {
                    nextLevelButton.textContent = "Mission beenden";
                } else {
                    nextLevelButton.textContent = "Nächstes Level";
                }
            }, 500);
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
    });
</script>
</body>
</html>
